-- CREATED BY VERTABELO (HTTP://VERTABELO.COM)
-- LAST MODIFICATION DATE: 2020-06-06 16:43:19.828

-- Complete set of DDL instructions required to create database structure on university Oracle server
-- TABLES
-- TABLE: DIAGNOSIS
CREATE TABLE DIAGNOSIS (
    ID INTEGER  NOT NULL,
    NAME VARCHAR2(50)  NOT NULL,
    CONSTRAINT DIAGNOSIS_PK PRIMARY KEY (ID)
) ;

-- TABLE: DOCTOR
CREATE TABLE DOCTOR (
    ID INTEGER  NOT NULL,
    NAME VARCHAR2(20)  NOT NULL,
    SURNAME VARCHAR2(20)  NOT NULL,
    DEPARTMENT VARCHAR2(50)  NOT NULL,
    TITLE VARCHAR2(20)  NULL,
    EMAIL VARCHAR2(50)  NULL,
    PHONE VARCHAR2(20)  NULL,
    SALARY NUMBER(10)  NULL,
    OFF_DAY VARCHAR2(15)  NULL,
    COMM NUMBER(10)  NULL,
    CONSTRAINT DOCTOR_PK PRIMARY KEY (ID)
) ;

-- TABLE: INSURANCE
CREATE TABLE INSURANCE (
    ID INTEGER  NOT NULL,
    NAME VARCHAR2(20)  NOT NULL,
    CONSTRAINT INSURANCE_PK PRIMARY KEY (ID)
) ;

-- TABLE: PATIENT
CREATE TABLE PATIENT (
    ID INTEGER  NOT NULL,
    INSURANCE_ID INTEGER  NOT NULL,
    NAME VARCHAR2(20)  NOT NULL,
    SURNAME VARCHAR2(20)  NOT NULL,
    GENDER VARCHAR2(20)  NULL,
    BIRTHDATE DATE  NULL,
    EMAIL VARCHAR2(50)  NULL,
    PHONE VARCHAR2(20)  NULL,
    DISTRICT VARCHAR2(20)  NULL,
    CITY VARCHAR2(20)  NULL,
    CONSTRAINT PATIENT_PK PRIMARY KEY (ID)
) ;

-- TABLE: SERVICE
CREATE TABLE SERVICE (
    ID INTEGER  NOT NULL,
    INSURANCE_ID INTEGER  NOT NULL,
    NAME VARCHAR2(30)  NOT NULL,
    UNIT_PRICE NUMBER(10)  NOT NULL,
    QUANTITY INTEGER  NOT NULL,
    CONSTRAINT SERVICE_PK PRIMARY KEY (ID)
) ;

-- TABLE: VISIT
CREATE TABLE VISIT (
    ID INTEGER  NOT NULL,
    DOCTOR_ID INTEGER  NOT NULL,
    PATIENT_ID INTEGER  NOT NULL,
    TYPE VARCHAR2(20)  NOT NULL,
    "DATE" DATE  NULL,
    STATE INTEGER  NOT NULL,
    CONSTRAINT VISIT_PK PRIMARY KEY (ID)
) ;

-- TABLE: VISIT_PROCESS
CREATE TABLE VISIT_PROCESS (
    ID INTEGER  NOT NULL,
    VISIT_ID INTEGER  NOT NULL,
    SERVICE_ID INTEGER  NOT NULL,
    DIAGNOSIS_ID INTEGER  NOT NULL,
    PROCESS_DATE DATE  NULL,
    CONSTRAINT VISIT_PROCESS_PK PRIMARY KEY (ID)
) ;

-- FOREIGN KEYS
-- REFERENCE: PATIENT_INSURANCE (TABLE: PATIENT)
ALTER TABLE PATIENT ADD CONSTRAINT PATIENT_INSURANCE
    FOREIGN KEY (INSURANCE_ID)
    REFERENCES INSURANCE (ID);

-- REFERENCE: SERVICE_INSURANCE (TABLE: SERVICE)
ALTER TABLE SERVICE ADD CONSTRAINT SERVICE_INSURANCE
    FOREIGN KEY (INSURANCE_ID)
    REFERENCES INSURANCE (ID);

-- REFERENCE: VISIT_DOCTOR (TABLE: VISIT)
ALTER TABLE VISIT ADD CONSTRAINT VISIT_DOCTOR
    FOREIGN KEY (DOCTOR_ID)
    REFERENCES DOCTOR (ID);

-- REFERENCE: VISIT_PATIENT (TABLE: VISIT)
ALTER TABLE VISIT ADD CONSTRAINT VISIT_PATIENT
    FOREIGN KEY (PATIENT_ID)
    REFERENCES PATIENT (ID);

-- REFERENCE: VISIT_PROCESS_DIAGNOSIS (TABLE: VISIT_PROCESS)
ALTER TABLE VISIT_PROCESS ADD CONSTRAINT VISIT_PROCESS_DIAGNOSIS
    FOREIGN KEY (DIAGNOSIS_ID)
    REFERENCES DIAGNOSIS (ID);

-- REFERENCE: VISIT_PROCESS_SERVICE (TABLE: VISIT_PROCESS)
ALTER TABLE VISIT_PROCESS ADD CONSTRAINT VISIT_PROCESS_SERVICE
    FOREIGN KEY (SERVICE_ID)
    REFERENCES SERVICE (ID);

-- REFERENCE: VISIT_PROCESS_VISIT (TABLE: VISIT_PROCESS)
ALTER TABLE VISIT_PROCESS ADD CONSTRAINT VISIT_PROCESS_VISIT
    FOREIGN KEY (VISIT_ID)
    REFERENCES VISIT (ID);
COMMIT;
-- END OF FILE.


-- Complete set of DML instructions required to fill all your tables with data
/*INSERT VALUES*/
/*DOCTOR*/
INSERT INTO DOCTOR (ID,NAME,SURNAME,DEPARTMENT,TITLE,EMAIL,PHONE,SALARY,OFF_DAY,COMM) VALUES 
(1,'BURAK','ALTIN','ORTHOPEDY','PROFESSOR','BURAK.ALTIN@HOSPITAL.COM','543554433',5000,'SATURDAY', 3000);
INSERT INTO DOCTOR (ID,NAME,SURNAME,DEPARTMENT,TITLE,EMAIL,PHONE,SALARY,OFF_DAY,COMM) VALUES 
(2,'OWEN','HAWES','CARDIOLOGY','ASSISTANT PROFESSOR','OWEN.HAWES@HOSPITAL.COM','364733734',3500,'WEDNESDAY', 1000);
INSERT INTO DOCTOR (ID,NAME,SURNAME,DEPARTMENT,TITLE,EMAIL,PHONE,SALARY,OFF_DAY,COMM) VALUES 
(3,'HARRY','BILLINGS','DIETITIAN','MEDICAL STUDENT','HARRY.BILLINGS@HOSPITAL.COM','637362556',2000,'WEDNESDAY',NULL);
INSERT INTO DOCTOR (ID,NAME,SURNAME,DEPARTMENT,TITLE,EMAIL,PHONE,SALARY,OFF_DAY,COMM) VALUES 
(4,'JOHN','WEISS','CARDIOLOGY','PROFESSOR','JOHN.WEISS@HOSPITAL.COM','526879898',6000,'MONDAY',NULL);
SELECT * FROM DOCTOR;
--UPDATE DOCTOR
--SET DEPARTMENT = 'ORTHOPEDY'
--WHERE ID = 1;

/*INSURANCE*/
SELECT * FROM INSURANCE;
INSERT INTO INSURANCE (ID,NAME) VALUES
(1,'GOVERNMENT');
INSERT INTO INSURANCE (ID,NAME) VALUES
(2,'PRIVATE');
SELECT * FROM INSURANCE;


/*PATIENT*/
INSERT INTO PATIENT (ID,INSURANCE_ID,NAME,SURNAME,GENDER,BIRTHDATE,EMAIL,PHONE,DISTRICT,CITY) VALUES 
(1,2,'PAM','WALLNER','MALE',TO_DATE('02-MAY-1983', 'DD-MON-YYYY'),'PAM.WALLNER@PATIENT.COM','324633864','KARTAL','ISTANBUL');
INSERT INTO PATIENT (ID,INSURANCE_ID,NAME,SURNAME,GENDER,BIRTHDATE,EMAIL,PHONE,DISTRICT,CITY) VALUES 
(2,1,'ALEX','ENGBER','MALE',TO_DATE('18-MAR-1963', 'DD-MON-YYYY'),NULL,'987633864','CANKAYA','ANKARA');
INSERT INTO PATIENT (ID,INSURANCE_ID,NAME,SURNAME,GENDER,BIRTHDATE,EMAIL,PHONE,DISTRICT,CITY) VALUES 
(3,1,'RACHEL','KIRK','FEMALE',TO_DATE('09-MAR-1993', 'DD-MON-YYYY'),'RACHEL.KIRK@PATIENT.COM',NULL,'KARTAL','ISTANBUL');
INSERT INTO PATIENT (ID,INSURANCE_ID,NAME,SURNAME,GENDER,BIRTHDATE,EMAIL,PHONE,DISTRICT,CITY) VALUES 
(4,2,'OLIVIA','PAPPAS','FEMALE',TO_DATE('29-MAY-2002', 'DD-MON-YYYY'),NULL,'438733864',NULL,NULL);
SELECT * FROM PATIENT;


/*VISIT*/
--1 DEVAM 
--2 BITTI
INSERT INTO VISIT (ID,DOCTOR_ID,PATIENT_ID,TYPE,"DATE",STATE) VALUES 
(1,1,2,'OUTPATIENT',TO_DATE('17-MAR-2020', 'DD-MON-YYYY'),2);
INSERT INTO VISIT (ID,DOCTOR_ID,PATIENT_ID,TYPE,"DATE",STATE) VALUES 
(2,2,4,'OUTPATIENT',TO_DATE('19-MAR-2020', 'DD-MON-YYYY'),1);
INSERT INTO VISIT (ID,DOCTOR_ID,PATIENT_ID,TYPE,"DATE",STATE) VALUES 
(3,3,4,'INPATIENT',TO_DATE('18-MAR-2020', 'DD-MON-YYYY'),2);
INSERT INTO VISIT (ID,DOCTOR_ID,PATIENT_ID,TYPE,"DATE",STATE) VALUES 
(4,1,3,'INPATIENT',TO_DATE('20-MAR-2020', 'DD-MON-YYYY'),1);
INSERT INTO VISIT (ID,DOCTOR_ID,PATIENT_ID,TYPE,"DATE",STATE) VALUES 
(5,4,1,'INPATIENT',TO_DATE('29-MAR-2020', 'DD-MON-YYYY'),2);
SELECT * FROM VISIT;

SELECT *
FROM VISIT, DOCTOR, PATIENT
WHERE VISIT.DOCTOR_ID = DOCTOR.ID AND VISIT.PATIENT_ID = PATIENT.ID;


/*SERVICE*/
INSERT INTO SERVICE (ID,INSURANCE_ID,NAME,UNIT_PRICE,QUANTITY) VALUES
(1,1,'BLOODLETTING',20,5);
INSERT INTO SERVICE (ID,INSURANCE_ID,NAME,UNIT_PRICE,QUANTITY) VALUES
(2,2,'SURGERY',3000,1);
INSERT INTO SERVICE (ID,INSURANCE_ID,NAME,UNIT_PRICE,QUANTITY) VALUES
(3,2,'TOMOGRAPHY',1000,1);
INSERT INTO SERVICE (ID,INSURANCE_ID,NAME,UNIT_PRICE,QUANTITY) VALUES
(4,1,'ULTRASOUND',500,1);
SELECT * FROM SERVICE;


/*DIAGNOSIS*/
INSERT INTO DIAGNOSIS (ID,NAME) VALUES
(1,'CANCER');
INSERT INTO DIAGNOSIS (ID,NAME) VALUES
(2,'COVID-19');
INSERT INTO DIAGNOSIS (ID,NAME) VALUES
(3,'CALCULARY');
INSERT INTO DIAGNOSIS (ID,NAME) VALUES
(4,'INFECTION');
SELECT * FROM DIAGNOSIS;


/*VISIT_PROCESS*/
INSERT INTO VISIT_PROCESS (ID,VISIT_ID,SERVICE_ID,DIAGNOSIS_ID,PROCESS_DATE) VALUES
(1,3,2,1,TO_DATE('19-MAR-2020', 'DD-MON-YYYY'));
INSERT INTO VISIT_PROCESS (ID,VISIT_ID,SERVICE_ID,DIAGNOSIS_ID,PROCESS_DATE) VALUES
(2,3,1,1,TO_DATE('18-MAR-2020', 'DD-MON-YYYY'));
INSERT INTO VISIT_PROCESS (ID,VISIT_ID,SERVICE_ID,DIAGNOSIS_ID,PROCESS_DATE) VALUES
(3,4,1,2,TO_DATE('20-MAR-2020', 'DD-MON-YYYY'));
INSERT INTO VISIT_PROCESS (ID,VISIT_ID,SERVICE_ID,DIAGNOSIS_ID,PROCESS_DATE) VALUES
(4,2,4,3,TO_DATE('19-MAR-2020', 'DD-MON-YYYY'));
SELECT * FROM VISIT_PROCESS;